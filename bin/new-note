#!/bin/bash
set -euo pipefail
# IFS=$'\n\t'

bin_dir=$(dirname "$0")

id="$1"
shift
title="$*"

file=$(realpath "$bin_dir/../notes/$id.md")

if [[ -f "$file" ]]; then
  echo "failure: file already exists"
  exit 1
fi

cat << EOF > "$file"
# $title

* [ ] fill out this note

## References
EOF

link="[[$id]]"
echo "New note: $file"
echo "Link:     $link"

echo "$link" | pbcopy
